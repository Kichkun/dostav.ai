# Dostav.ai
# Эксперименты с PC-VRPTW для кейса Dostavista от команды RHT.ai

Чтобы запустить код, нужно поменять в скрипте **run.py** data = ... на необходимый файл.

Запустите setup.py из папки с решением для установки зависимостей

Для удобства можно пользоваться _*jupyter notebook*_

Опробованные алгоритмы и подходы:


Алгоритм | Описание | Решение | Очки | Вывод 
------------ | ------------- | -------------  | -------------  | -------------
[OR-Tools](https://developers.google.com/optimization/) | Google VRP Solver | or-tools | 186k | В целом выглядит как адекватное решение от гугла, неплохая документация, есть поддержка, но не очень хорошо кастомизируется на вариации vrp. 
Naive Greedy | Жадный алгоритм | greedy_alg | 120k total (400 avg per courier) | Дешево и сердито
[LKH-3](http://akira.ruc.dk/~keld/research/LKH-3/) | Lin-Kernighan-Helsgaun TSP Solver | vovan-lkh | 1000-1500 на нескольких рандомных курьерах, но проблемы с временными рамками | Выйгрывала TSP на кагле и прочих соревнованиях, но академиками для академиков, C, плохая документация, не очевидно как интерпретировать результат. Но около sota на задаче, нужно уметь правильно настраивать. Выбивает неплохие результаты на одельных курьерах, но иногда они стали опаздывать на dropoff. Возможно не правильно настроенны временные рамки. Как и многие другие TSP/VRP солверы дает адекватный ответ только если получилось построить обход всех точек (нужно бить на сабсеты / делать много vehicles и потом выбирать лучшие / etc.) Успели початиться с автором в процессе. Нет multiple depout, так что генерим кандидатов для каждого курьера, потом решаем PDPTW и выбираем лучший тур.
Bruteforce | Оптимизированный прямой перебор | bruteforce | NA | Слишком жадное решение. Даже при распараллеливании на 20 ядер нужно несколько часов.


## А еще?

Алгоритм | Описание | Решение
------------ | ------------- | -------------
[Attention, Learn to Solve Routing Problems!](https://github.com/wouterkool/attention-learn-to-route) | RL stuff |  Статья от студента, тестируется на маленьких задачах, в реальности кажется пока не работает
[VRP-RL](https://github.com/OptMLGroup/VRP-RL) | yet another RL | Для стандартной TSR / VRP без модификаций
clustering | space reduction | в задаче могут быть кластеры откуда / куда доставляют, но все равно нужен нормальный солвер внутри
